<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="shortcut icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <title>React App</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <script async src="%PUBLIC_URL%/scripts/isotope.pkgd.min.js"></script>
    <script async src="%PUBLIC_URL%/scripts/packery-mode.pkgd.min.js"></script>
    <script type="text/javascript">
      setTimeout(() => {
        var PackeryMode = Isotope.LayoutMode.modes.packery;
        var __resetLayout = PackeryMode.prototype._resetLayout;
        PackeryMode.prototype._resetLayout = function() {
          __resetLayout.call( this );
          // reset packer
          var parentSize = getSize( this.element.parentNode );
          var colW = this.columnWidth + this.gutter;
          this.fitWidth = Math.floor( ( parentSize.innerWidth + this.gutter ) / colW ) * colW;
          this.packer.width = this.fitWidth;
          this.packer.height = Number.POSITIVE_INFINITY;
          this.packer.reset();
        };

        PackeryMode.prototype._getContainerSize = function() {
          // remove empty space from fit width
          var emptyWidth = 0;
          for ( var i=0, len = this.packer.spaces.length; i < len; i++ ) {
            var space = this.packer.spaces[i];
            if ( space.y === 0 && space.height === Number.POSITIVE_INFINITY ) {
              emptyWidth += space.width;
            }
          }

          return {
            width: this.fitWidth - this.gutter,
            height: this.maxY - this.gutter
          };
        };

        // always resize
        PackeryMode.prototype.needsResizeLayout = function() {
          return true;
        };
      }, 50);
    </script>
  </body>
</html>
